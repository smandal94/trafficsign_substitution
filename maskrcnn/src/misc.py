import os, sys
import numpy as np
from tqdm import tqdm
import cv2
from PIL import Image

def main():
    palette = [[168, 140, 21], [81, 147, 215], [120, 96, 195], [175, 140, 37], [17, 218, 132], 
            [38, 192, 53], [104, 231, 173], [48, 70, 71], [36, 82, 43], [129, 110, 69], [192, 26, 113], 
            [195, 233, 30], [131, 20, 232], [215, 54, 168], [199, 173, 54], [67, 233, 72], [24, 16, 15], 
            [75, 229, 231], [78, 59, 16], [53, 39, 149], [90, 161, 173], [102, 117, 98], [99, 104, 242], 
            [167, 190, 34], [38, 101, 7], [232, 20, 145], [75, 119, 122], [188, 46, 63], [202, 176, 116], 
            [114, 230, 238], [159, 36, 118], [43, 184, 119], [87, 59, 39], [224, 192, 67], [40, 7, 52], 
            [206, 62, 109], [28, 223, 54], [218, 68, 106], [89, 149, 188], [203, 206, 76], [51, 67, 153], 
            [210, 42, 71], [144, 200, 160], [142, 134, 58], [167, 140, 3], [211, 205, 205], [66, 139, 99], 
            [196, 200, 1], [55, 30, 107], [10, 77, 169], [248, 15, 56], [191, 196, 121], [218, 186, 104], 
            [13, 108, 146], [195, 0, 192], [79, 112, 5], [121, 166, 252], [195, 160, 86], [133, 19, 123], 
            [118, 44, 247], [122, 246, 1], [15, 41, 5], [155, 97, 98], [170, 192, 92], [21, 108, 17], 
            [242, 108, 248], [181, 45, 201], [99, 105, 246], [148, 27, 94], [14, 124, 156], [120, 227, 254], 
            [112, 168, 193], [105, 78, 238], [79, 69, 238], [217, 50, 146], [216, 245, 67], [53, 30, 230], 
            [121, 115, 206], [240, 86, 183], [210, 68, 86], [209, 127, 152], [112, 17, 5], [205, 43, 101], 
            [99, 246, 56], [129, 138, 186], [102, 71, 122], [224, 66, 160], [166, 163, 44], [72, 34, 8], 
            [36, 177, 188], [209, 215, 193], [203, 39, 222], [228, 112, 135], [161, 48, 83], [157, 47, 237], 
            [65, 110, 225], [117, 154, 30], [10, 209, 43], [220, 79, 65], [245, 89, 86], [117, 107, 174], 
            [50, 145, 209], [140, 182, 81], [47, 41, 116], [136, 32, 69], [162, 47, 124], [209, 158, 44], 
            [196, 25, 71], [187, 252, 237], [106, 186, 129], [60, 173, 80], [34, 44, 75], [149, 129, 11], 
            [136, 236, 241], [16, 11, 156], [41, 171, 100], [36, 176, 106], [108, 172, 43], [45, 60, 178], 
            [182, 242, 180], [18, 71, 235], [239, 121, 221], [25, 56, 129], [246, 103, 226], [16, 145, 73], 
            [89, 100, 52], [222, 8, 105], [174, 55, 94], [90, 67, 214], [76, 254, 5], [159, 252, 236], 
            [252, 182, 43], [162, 232, 113], [129, 132, 39], [196, 199, 217], [71, 148, 37], [223, 232, 69], 
            [7, 216, 235], [34, 192, 17], [7, 59, 54], [27, 177, 173], [177, 202, 58], [38, 173, 86], 
            [67, 5, 153], [159, 167, 49], [2, 159, 252], [184, 21, 87], [128, 245, 239], [61, 70, 29], 
            [210, 123, 241], [95, 4, 56], [232, 143, 83], [135, 109, 31], [5, 11, 110], [116, 97, 231], 
            [139, 140, 118], [200, 252, 39], [81, 214, 84], [117, 212, 210], [20, 146, 32], [200, 44, 247], 
            [180, 77, 129], [211, 168, 115], [143, 210, 103], [94, 226, 239], [110, 113, 159], [83, 42, 209], 
            [5, 71, 113], [99, 70, 164], [106, 191, 226], [159, 69, 18], [9, 122, 230], [52, 148, 83], 
            [174, 68, 251], [185, 228, 192], [3, 244, 163], [245, 1, 34], [35, 128, 30], [63, 107, 158], 
            [17, 97, 219], [239, 104, 81], [184, 163, 86], [172, 87, 252], [133, 17, 95], [155, 119, 23], 
            [55, 251, 144], [61, 218, 185], [16, 86, 189], [171, 52, 75], [61, 74, 202], [133, 186, 75], 
            [159, 142, 43], [125, 209, 148], [36, 240, 218], [55, 195, 218], [169, 140, 26], [165, 43, 104], 
            [193, 249, 141], [95, 61, 113], [101, 206, 187]]
    
    mask = Image.open('../../dataset/DFG_traffic_sign_dataset/labels/0000010.png').convert('P')
    mask.putpalette(np.array(palette, dtype=np.uint8))
    mask.save('temp.png')

    # print('Unique: ', np.unique(img))
    # cv2.imshow('img', np.array(mask))
    # key = cv2.waitKey(0)
    # if key == 27:
    #     cv2.destroyAllWindows()
    #     exit()

if __name__ == '__main__':
    main()